(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{100:function(t,e,a){t.exports={toDoListTitle:"ToDoList_toDoListTitle__3bB3D"}},119:function(t,e,a){},120:function(t,e,a){},144:function(t,e,a){"use strict";a.r(e);var n,i,o=a(0),c=a(31),s=a.n(c),r=(a(119),a(120),a(204)),d=a(205),l=a(206),u=a(198),j=a(203),b=a(200),O=a(207),f=a(208),p=a(188),h=a(196),m=a(13),T=a(189),g=a(185),x=a(2),v=Object(o.memo)((function(t){var e=Object(o.useState)(""),a=Object(m.a)(e,2),n=a[0],i=a[1],c=Object(o.useState)(!1),s=Object(m.a)(c,2),r=s[0],d=s[1],l=r&&Object(x.jsx)("div",{style:{color:"red"},children:"Title is required"}),j=function(){n?t.callBack(n.trim()):d(!0),i("")};return Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[Object(x.jsx)(T.a,{fullWidth:!0,variant:"standard",color:"info",error:r,value:n,onChange:function(t){i(t.currentTarget.value),d(!1)},onKeyPress:function(t){"Enter"===t.key&&j()},helperText:r?l:" ",disabled:!!t.disabled&&t.disabled,placeholder:t.placeholder,autoComplete:"off"}),Object(x.jsx)(u.a,{size:"small",color:"info",onClick:j,disabled:!!t.disabled&&t.disabled,children:Object(x.jsx)(g.a,{})})]})})),y=a(98),D=a(75),L=a.n(D),S=Object(o.memo)((function(t){var e=Object(o.useState)(t.title),a=Object(m.a)(e,2),n=a[0],i=a[1],c=Object(o.useState)(!1),s=Object(m.a)(c,2),r=s[0],d=s[1];return r?Object(x.jsx)(T.a,{fullWidth:!0,className:L.a.text,variant:"standard",value:n,autoFocus:!0,onBlur:function(){d(!1),t.callBack(n.trim())},onChange:function(t){i(t.currentTarget.value)}}):Object(x.jsx)("span",{onDoubleClick:function(){t.disabled||(d(!0),i(t.title))},className:L.a.text,children:t.title})})),I=a(186),k=a(197),E=a(199),C=a(21),A=a(16),w=a(5),_=a(14),N=a(99),R=a.n(N);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var G,P=R.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"642ef21e-b6f0-4355-8bfb-f882a3b3360e"}}),F=function(){return P.get("todo-lists/")},W=function(t){return P.post("todo-lists/",{title:t})},U=function(t){return P.delete("todo-lists/".concat(t))},B=function(t,e){return P.put("todo-lists/".concat(t),{title:e})},K=function(t){return P.get("todo-lists/".concat(t,"/tasks"))},M=function(t,e){return P.delete("todo-lists/".concat(t,"/tasks/").concat(e))},H=function(t,e){return P.post("todo-lists/".concat(t,"/tasks"),{title:e})},z=function(t,e,a){return P.put("todo-lists/".concat(t,"/tasks/").concat(e),Object(_.a)({},a))},V=function(t){return P.post("auth/login",t)},Z=function(){return P.delete("auth/login")},q=function(){return P.get("auth/me")};!function(t){t.SET_IS_LOGGED_IN="Login/SET-IS-LOGGED-IN"}(G||(G={}));var Y,J={isLoggedIn:!1},X=function(t){return{type:G.SET_IS_LOGGED_IN,payload:{isLoggedIn:t}}};!function(t){t.SET_STATUS="APP/SET-STATUS",t.SET_ERROR="APP/SET-ERROR",t.SET_IS_INITIALIZED="APP/SET-IS-INITIALIZED"}(Y||(Y={}));var $={status:"idle",error:null,isInitialized:!1},Q=function(t){return{type:Y.SET_STATUS,payload:{status:t}}},tt=function(t){return{type:Y.SET_ERROR,payload:{error:t}}},et=function(){return function(t){q().then((function(e){var a;0===e.data.resultCode&&t(X(!0)),t((a=!0,{type:Y.SET_IS_INITIALIZED,payload:{isInitialized:a}}))}))}},at=function(t,e,a){e.messages.length?a(tt(e.messages[0])):a(tt("some error occurred")),a(Q("failed")),a(it(t,"failed"))},nt=function(t,e,a){a(tt(e.message?e.message:"Some error")),a(Q("failed")),a(it(t,"failed"))},it=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",payload:{id:t,status:e}}},ot=function(t,e,a){return function(n,i){n(Q("loading")),n(it(t,"loading"));var o=i().tasks[t].find((function(t){return t.id===e}));if(!o)return n(Q("failed")),n(it(t,"failed")),void console.warn("Task is not found");var c=Object(_.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},a);z(t,e,c).then((function(i){var o=i.data;0===o.resultCode?(n({type:"UPDATE-TASK",payload:{todolistId:t,taskId:e,model:a}}),n(Q("succeeded")),n(it(t,"succeeded"))):at(t,o,n)})).catch((function(e){nt(t,e,n)}))}},ct=a(191),st=a(76),rt=a.n(st),dt=Object(o.memo)((function(t){return Object(x.jsxs)("div",{className:rt.a.taskWrap,children:[Object(x.jsxs)("div",{className:rt.a.textWrap,children:[Object(x.jsx)(ct.a,{checked:t.status===n.Completed,onChange:function(e){return t.changeStatus(t.taskId,e)},disabled:t.disabled}),Object(x.jsx)(S,{callBack:function(e){return t.updateTask(t.taskId,e)},title:t.title,disabled:t.disabled})]}),Object(x.jsx)(u.a,{onClick:function(){return t.removeTask(t.taskId)},disabled:t.disabled,children:Object(x.jsx)(I.a,{})})]},t.taskId)})),lt=a(100),ut=a.n(lt),jt=["demo"],bt=Object(o.memo)((function(t){var e=t.demo,a=void 0!==e&&e,i=Object(y.a)(t,jt),c=Object(C.b)(),s=Object(C.c)((function(t){return t.tasks[i.toDoList.id]})),r="loading"===i.toDoList.entityStatus;Object(o.useEffect)((function(){var t;a||c((t=i.toDoList.id,function(e){e(Q("loading")),e(it(t,"loading")),K(t).then((function(a){var n=a.data;null===n.error?(e({type:"SET-TASKS",payload:{todolistId:t,tasks:n.items}}),e(Q("succeeded")),e(it(t,"succeeded"))):(e(tt(n.error)),e(Q("failed")),e(it(t,"failed")))})).catch((function(a){nt(t,a,e)}))}))}),[]);var d=Object(o.useCallback)((function(t){c(function(t,e){return function(a){a(Q("loading")),a(it(t,"loading")),H(t,e).then((function(e){var n=e.data;0===n.resultCode?(a({type:"ADD-TASK",payload:{task:n.data.item}}),a(Q("succeeded")),a(it(t,"succeeded"))):at(t,n,a)})).catch((function(e){nt(t,e,a)}))}}(i.toDoList.id,t))}),[c,i.toDoList.id]),l=Object(o.useCallback)((function(t){c(function(t,e){return function(a){a(Q("loading")),a(it(t,"loading")),M(t,e).then((function(n){var i=n.data;0===i.resultCode?(a({type:"REMOVE-TASK",payload:{todolistId:t,taskId:e}}),a(Q("succeeded")),a(it(t,"succeeded"))):at(t,i,a)})).catch((function(e){nt(t,e,a)}))}}(i.toDoList.id,t))}),[c,i.toDoList.id]),j=Object(o.useCallback)((function(t,e){c(ot(i.toDoList.id,t,{title:e}))}),[c,i.toDoList.id]),O=Object(o.useCallback)((function(t,e){c(ot(i.toDoList.id,t,e.currentTarget.checked?{status:n.Completed}:{status:n.New}))}),[c,i.toDoList.id]),f=Object(o.useCallback)((function(){return i.changeFilter(i.toDoList.id,"all")}),[i.toDoList.id,i.changeFilter]),p=Object(o.useCallback)((function(){return i.changeFilter(i.toDoList.id,"active")}),[i.toDoList.id,i.changeFilter]),h=Object(o.useCallback)((function(){return i.changeFilter(i.toDoList.id,"completed")}),[i.toDoList.id,i.changeFilter]),m=Object(o.useCallback)((function(t){return i.updateToDoListTitle(i.toDoList.id,t)}),[i.updateToDoListTitle,i.toDoList.id]),T=s;"active"===i.toDoList.filter&&(T=s.filter((function(t){return t.status===n.New}))),"completed"===i.toDoList.filter&&(T=s.filter((function(t){return t.status===n.Completed})));var g=T.map((function(t){return Object(x.jsx)(dt,{taskId:t.id,title:t.title,status:t.status,changeStatus:O,updateTask:j,removeTask:l,disabled:r},t.id)}));return Object(x.jsxs)(k.a,{style:{padding:"10px",maxWidth:"255px"},children:[Object(x.jsxs)("h3",{className:ut.a.toDoListTitle,children:[Object(x.jsx)(S,{title:i.toDoList.title,callBack:m,disabled:r}),Object(x.jsx)(u.a,{onClick:function(){return i.removeToDoList(i.toDoList.id)},disabled:r,children:Object(x.jsx)(I.a,{})})]}),Object(x.jsx)(v,{callBack:d,disabled:r,placeholder:"Enter task title"}),Object(x.jsx)("div",{children:g}),Object(x.jsxs)(E.a,{children:[Object(x.jsx)(b.a,{color:"secondary",variant:"all"===i.toDoList.filter?"contained":"outlined",onClick:f,children:"All"}),Object(x.jsx)(b.a,{color:"primary",variant:"active"===i.toDoList.filter?"contained":"outlined",onClick:p,children:"Active"}),Object(x.jsx)(b.a,{color:"success",variant:"completed"===i.toDoList.filter?"contained":"outlined",onClick:h,children:"Completed"})]})]})})),Ot=a(15),ft=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(C.b)(),i=Object(C.c)((function(t){return t.toDoLists})),c=Object(C.c)((function(t){return t.auth.isLoggedIn}));Object(o.useEffect)((function(){!a&&c&&n((function(t){t(Q("loading")),F().then((function(e){var a=e.data;t({type:"SET-TODOLIST",payload:{toDoLists:a}}),t(Q("succeeded"))})).catch((function(e){t(tt(e.message?e.message:"Some error")),t(Q("failed"))}))}))}),[]);var s=Object(o.useCallback)((function(t,e){n(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",payload:{id:t,filter:e}}}(t,e))}),[n]),r=Object(o.useCallback)((function(t){n(function(t){return function(e){e(Q("loading")),e(it(t,"loading")),U(t).then((function(a){var n=a.data;console.log(n),0===n.resultCode?(e({type:"REMOVE-TODOLIST",payload:{id:t}}),e(Q("succeeded")),e(it(t,"succeeded"))):at(t,n,e)})).catch((function(a){nt(t,a,e)}))}}(t))}),[n]),d=Object(o.useCallback)((function(t,e){n(function(t,e){return function(a){a(Q("loading")),a(it(t,"loading")),B(t,e).then((function(n){var i=n.data;0===i.resultCode?(a(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",payload:{id:t,title:e}}}(t,e)),a(Q("succeeded")),a(it(t,"succeeded"))):at(t,i,a)})).catch((function(e){nt(t,e,a)}))}}(t,e))}),[n]),l=Object(o.useCallback)((function(t){n(function(t){return function(e){e(Q("loading")),W(t).then((function(t){var a=t.data;0===a.resultCode?(e({type:"ADD-TODOLIST",payload:{toDoList:a.data.item}}),e(Q("succeeded"))):(a.messages.length?e(tt(a.messages[0])):e(tt("some error occurred")),e(Q("failed")))})).catch((function(t){e(tt(t.message?t.message:"Some error")),e(Q("failed"))}))}}(t))}),[n]);return c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{container:!0,style:{paddingTop:"20px"},children:Object(x.jsx)(v,{callBack:l,placeholder:"Enter ToDoList title"})}),Object(x.jsx)(h.a,{container:!0,spacing:2,children:i.map((function(t){return Object(x.jsx)(h.a,{item:!0,children:Object(x.jsx)(bt,{toDoList:t,changeFilter:s,removeToDoList:r,updateToDoListTitle:d,demo:a},t.id)},t.id)}))})]}):Object(x.jsx)(Ot.a,{to:"/login"})},pt=a(187),ht=a(193),mt=a(192),Tt=o.forwardRef((function(t,e){return Object(x.jsx)(mt.a,Object(_.a)({elevation:6,ref:e,variant:"filled"},t))}));function gt(){var t=Object(C.b)(),e=Object(C.c)((function(t){return t.app.error})),a=null!==e,n=function(e,a){"clickaway"!==a&&t(tt(null))};return Object(x.jsx)(pt.a,{spacing:2,sx:{width:"100%"},children:Object(x.jsx)(ht.a,{open:a,autoHideDuration:3e3,onClose:n,children:Object(x.jsx)(Tt,{onClose:n,severity:"error",sx:{width:"100%"},children:e})})})}var xt=a(194),vt=a(183),yt=a(201),Dt=a(202),Lt=a(104),St=function(){var t=Object(C.b)(),e=Object(C.c)((function(t){return t.auth.isLoggedIn})),a=Object(Lt.a)({validate:function(t){return t.email?t.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(t){t(Q("loading")),V(a).then((function(e){var a=e.data;0===a.resultCode?(t(X(!0)),t(Q("succeeded"))):(t(tt(a.messages[0])),t(Q("failed")))})).catch((function(e){t(tt(e.message?e.message:"Some error")),t(Q("failed"))}))}))}});return e?Object(x.jsx)(Ot.a,{to:"/"}):Object(x.jsx)(h.a,{container:!0,justifyContent:"center",children:Object(x.jsx)(h.a,{item:!0,xs:4,children:Object(x.jsx)("form",{onSubmit:a.handleSubmit,children:Object(x.jsxs)(xt.a,{children:[Object(x.jsxs)(vt.a,{children:[Object(x.jsxs)("p",{children:["To log registered ",Object(x.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(x.jsx)("p",{children:"Guest authorization"}),Object(x.jsx)("p",{children:"email: free@samuraijs.com"}),Object(x.jsx)("p",{children:"password: free"})]}),Object(x.jsxs)(yt.a,{children:[Object(x.jsx)(T.a,Object(_.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?Object(x.jsx)("div",{children:a.errors.email}):null,Object(x.jsx)(T.a,Object(_.a)({label:"Password",margin:"normal",type:"password"},a.getFieldProps("password"))),a.errors.password?Object(x.jsx)("div",{children:a.errors.password}):null,Object(x.jsx)(Dt.a,{control:Object(x.jsx)(ct.a,Object(_.a)(Object(_.a)({},a.getFieldProps("rememberMe")),{},{checked:a.values.rememberMe})),label:"Remember me"}),Object(x.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})};var It=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(C.b)(),i=Object(C.c)((function(t){return t.app.isInitialized})),c=Object(C.c)((function(t){return t.app.status})),s=Object(C.c)((function(t){return t.auth.isLoggedIn}));Object(o.useEffect)((function(){n(et())}),[]);var h=Object(o.useCallback)((function(){n((function(t){t(Q("loading")),Z().then((function(e){var a=e.data;0===a.resultCode?(t(X(!1)),t(Q("succeeded"))):(t(tt(a.messages[0])),t(Q("failed")))})).catch((function(e){t(tt(e.message?e.message:"Some error")),t(Q("failed"))}))}))}),[]);return i?Object(x.jsxs)("div",{children:[Object(x.jsx)(gt,{}),Object(x.jsx)(d.a,{position:"static",children:Object(x.jsxs)(l.a,{children:[Object(x.jsx)(u.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(p.a,{})}),Object(x.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1}}),s&&Object(x.jsx)(b.a,{color:"inherit",onClick:h,children:"Log out"})]})}),Object(x.jsx)("div",{style:{height:"4px"},children:"loading"===c&&Object(x.jsx)(O.a,{color:"secondary"})}),Object(x.jsx)(f.a,{children:Object(x.jsxs)(Ot.d,{children:[Object(x.jsx)(Ot.b,{path:"/",element:Object(x.jsx)(ft,{demo:a})}),Object(x.jsx)(Ot.b,{path:"/login",element:Object(x.jsx)(St,{})})]})})]}):Object(x.jsx)("div",{style:{marginTop:"200px",textAlign:"center"},children:Object(x.jsx)(r.a,{color:"secondary"})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=a(65),Et=a(103),Ct=Object(kt.b)({toDoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.payload.id}));case"ADD-TODOLIST":return[Object(_.a)(Object(_.a)({},e.payload.toDoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(A.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.payload.id?Object(_.a)(Object(_.a)({},t),{},{title:e.payload.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.payload.id?Object(_.a)(Object(_.a)({},t),{},{filter:e.payload.filter}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.payload.id?Object(_.a)(Object(_.a)({},t),{},{entityStatus:e.payload.status}):t}));case"SET-TODOLIST":return e.payload.toDoLists.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(_.a)(Object(_.a)({},t),{},Object(w.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case"ADD-TASK":return Object(_.a)(Object(_.a)({},t),{},Object(w.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(A.a)(t[e.payload.task.todoListId]))));case"UPDATE-TASK":return Object(_.a)(Object(_.a)({},t),{},Object(w.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(_.a)(Object(_.a)({},t),e.payload.model):t}))));case"ADD-TODOLIST":return Object(_.a)(Object(_.a)({},t),{},Object(w.a)({},e.payload.toDoList.id,[]));case"REMOVE-TODOLIST":var a=Object(_.a)({},t);return delete a[e.payload.id],a;case"SET-TODOLIST":var n=Object(_.a)({},t);return e.payload.toDoLists.forEach((function(t){n[t.id]=[]})),n;case"SET-TASKS":return Object(_.a)(Object(_.a)({},t),{},Object(w.a)({},e.payload.todolistId,e.payload.tasks));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Y.SET_STATUS:case Y.SET_ERROR:case Y.SET_IS_INITIALIZED:return Object(_.a)(Object(_.a)({},t),e.payload);default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;return e.type===G.SET_IS_LOGGED_IN?Object(_.a)(Object(_.a)({},t),e.payload):t}}),At=Object(kt.c)(Ct,Object(kt.a)(Et.a)),wt=a(51);s.a.render(Object(x.jsx)(wt.a,{children:Object(x.jsx)(C.a,{store:At,children:Object(x.jsx)(It,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},75:function(t,e,a){t.exports={text:"EditableSpan_text__30hW1"}},76:function(t,e,a){t.exports={taskWrap:"Task_taskWrap__3XbEG",textWrap:"Task_textWrap__1tplp"}}},[[144,1,2]]]);
//# sourceMappingURL=main.a59848a5.chunk.js.map